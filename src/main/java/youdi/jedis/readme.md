### redis事务

组队  mutli  队列

执行  exec

discard: 放弃组队


mutli失败了， 所有的命令都失败

exec执行，其中一个失败， 不影响其他的


### watch
监控这一个key， 如果key被改动， 事务就被打断了。
乐观锁 (版本好)



### Redis事务三特性
1. 单独的隔离性
    事务中的所有命令都会序列化，按顺序执行， 事务在执行过程中， 不会被其他客户端发送来的命令所打断
   
2. 没有隔离级别的概念
    队列中的命令没有提交之前都不会实际执行的，因为事务提交前任务指令都不会实际执行
   
3. 不保证原子性
    事务中如果有一个命令执行失败，其后的命令仍然会被执行，没有回滚
   



### 秒杀系统

1. 超时
   
    使用连接池
   
2. 超卖
   
    乐观锁 + 事务
   
3. 乐观锁造成库存遗留问题
   
    lua脚本语言 
